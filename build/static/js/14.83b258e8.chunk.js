(this["webpackJsonpdxd-compliance"]=this["webpackJsonpdxd-compliance"]||[]).push([[14],{302:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var s=t(12),c=t(0),n=function(){var e=Object(c.useRef)(null),r=Object(c.useState)(),t=Object(s.a)(r,2),n=t[0],o=t[1];return{handleSearch:function(r){return function(t){var s,c=(null===(s=t.target.value)||void 0===s?void 0:s.trim())||null;o(c),(null===e||void 0===e?void 0:e.current)&&clearTimeout(null===e||void 0===e?void 0:e.current),e.current=setTimeout((function(){r(c)}),600)}},inputValue:n}}},307:function(e,r,t){"use strict";t.d(r,"a",(function(){return s})),t.d(r,"b",(function(){return c}));var s=/^[_A-Za-z0-9-+]+(\.[_A-Za-z0-9-+]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z\u200c\u200b]{2,})$/,c=new RegExp("".concat(/(?=.*?[a-zA-Z])/.source).concat(/(?=.*?[0-9])/.source).concat(/(?=.*?[\!\"\-\@\#\$\%\&\*\(\)\'\^\`\.\,\/\:\;\_\+\=\<\>\?\{\}\[\\\]])/.source))},478:function(e,r,t){},518:function(e,r,t){"use strict";t.r(r);var s,c=t(12),n=t(111),o=t(17),i=t(304),a=t(309),l=t(308),d=t(307),j=t(80),u=t(0),b=t(72),m=["title","titleId"];function O(){return O=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},O.apply(this,arguments)}function h(e,r){if(null==e)return{};var t,s,c=function(e,r){if(null==e)return{};var t,s,c={},n=Object.keys(e);for(s=0;s<n.length;s++)t=n[s],r.indexOf(t)>=0||(c[t]=e[t]);return c}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)t=n[s],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}function f(e,r){var t=e.title,c=e.titleId,n=h(e,m);return u.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16.091 11.999",ref:r,"aria-labelledby":c},n),t?u.createElement("title",{id:c},t):null,s||(s=u.createElement("path",{fill:"currentColor",d:"M5.465,16.341.236,11.111a.8.8,0,0,1,0-1.138L1.373,8.836a.8.8,0,0,1,1.138,0l3.523,3.523L13.58,4.813a.8.8,0,0,1,1.138,0l1.138,1.138a.8.8,0,0,1,0,1.138L6.6,16.341A.8.8,0,0,1,5.465,16.341Z",transform:"translate(0 -4.577)"})))}var p=u.forwardRef(f),x=(t.p,t(1)),v=l.a().shape({current_password:l.c().required("Current Password is required"),new_password:l.c().required("New Password is required").matches(d.b,"New Password is invalid"),confirm_password:l.c().required("Confirm Password is required").oneOf([l.b("new_password"),null],"Password not match")}),w=function(e){var r,t,s,l,d,m,O,h,f,w=e.close,g=Object(j.b)(),y=Object(u.useState)(),N=Object(c.a)(y,2),C=N[0],_=N[1],P=Object(i.e)({mode:"onChange",resolver:Object(a.a)(v)}),k=P.formState,S=P.register,A=P.handleSubmit,E=(0,P.watch)();return Object(x.jsxs)(n.i,{children:[Object(x.jsx)(n.i.Header,{children:"Change Password"}),Object(x.jsx)(n.i.Body,{children:Object(x.jsxs)("form",{className:"text-center",onSubmit:A((function(e){_(!0),g(Object(b.a)(e,(function(){_(!1),w(!0)}),(function(){_(!1)})))})),children:[Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsxs)("div",{className:"relative w-full",children:[Object(x.jsx)("input",Object(o.a)({className:"w-full",type:"password",placeholder:"Current Password"},S("current_password"))),!(null===(r=k.errors)||void 0===r?void 0:r.current_password)&&E.current_password&&Object(x.jsx)(p,{className:"absolute top-1/2 transform -translate-y-1/2 right-0 text-primary"})]}),(null===(t=k.errors)||void 0===t?void 0:t.current_password)&&Object(x.jsx)("p",{className:"form-error",children:null===(s=k.errors.current_password)||void 0===s?void 0:s.message})]}),Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsxs)("div",{className:"relative w-full",children:[Object(x.jsx)("input",Object(o.a)({className:"w-full",type:"password",placeholder:"New Password"},S("new_password"))),!(null===(l=k.errors)||void 0===l?void 0:l.new_password)&&E.new_password&&Object(x.jsx)(p,{className:"absolute top-1/2 transform -translate-y-1/2 right-0 text-primary"})]}),(null===(d=k.errors)||void 0===d?void 0:d.new_password)&&Object(x.jsx)("p",{className:"form-error",children:null===(m=k.errors.new_password)||void 0===m?void 0:m.message})]}),Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsxs)("div",{className:"relative w-full",children:[Object(x.jsx)("input",Object(o.a)({className:"w-full",type:"password",placeholder:"Confirm New Password"},S("confirm_password"))),!(null===(O=k.errors)||void 0===O?void 0:O.confirm_password)&&E.confirm_password&&Object(x.jsx)(p,{className:"absolute top-1/2 transform -translate-y-1/2 right-0 text-primary"})]}),(null===(h=k.errors)||void 0===h?void 0:h.confirm_password)&&Object(x.jsx)("p",{className:"form-error",children:null===(f=k.errors.confirm_password)||void 0===f?void 0:f.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(n.d,{type:"submit",isLoading:C,className:"mx-auto block !w-3/5 mb-2.5 px-6",color:"primary",disabled:!k.isValid||C,children:"Update Password"}),Object(x.jsx)("button",{type:"button",className:"mx-auto block text-xs underline",onClick:function(){return w(!1)},children:"Cancel & Go Back"})]})]})})]})},g=t(54),y=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return{type:"GET_USERS",payload:e,user:r,resolve:t,reject:s}},N=l.a().shape({email:l.c().required("Email is required").matches(d.a,"Email is invalid"),confirm_email:l.c().required("Confirm Email is required").oneOf([l.b("email"),null],"Email not match"),password:l.c().required("Password is required").matches(d.b,"Password is invalid"),confirm_password:l.c().required("Confirm Password is required").oneOf([l.b("password"),null],"Password not match")}),C=function(e){var r,t,s,l,d,b,m,O,h=e.close,f=Object(j.b)(),p=Object(u.useState)(),v=Object(c.a)(p,2),w=v[0],g=v[1],y=Object(i.e)({mode:"onChange",resolver:Object(a.a)(N)}),C=y.formState,_=y.register,P=y.handleSubmit;return Object(x.jsxs)(n.i,{children:[Object(x.jsx)(n.i.Header,{children:"+ Add a New Compliance Assistant"}),Object(x.jsx)(n.i.Body,{children:Object(x.jsxs)("form",{className:"text-center",onSubmit:P((function(e){g(!0),f(function(e){return{type:"ADD_CM",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}(e,(function(){g(!1),h(!0)}),(function(){g(!1)})))})),children:[Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsx)("input",Object(o.a)({placeholder:"Email Address"},_("email"))),(null===(r=C.errors)||void 0===r?void 0:r.email)&&Object(x.jsx)("p",{className:"form-error",children:null===(t=C.errors.email)||void 0===t?void 0:t.message})]}),Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsx)("input",Object(o.a)({placeholder:"Confirm Email Address"},_("confirm_email"))),(null===(s=C.errors)||void 0===s?void 0:s.confirm_email)&&Object(x.jsx)("p",{className:"form-error",children:null===(l=C.errors.confirm_email)||void 0===l?void 0:l.message})]}),Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsx)("input",Object(o.a)({type:"password",placeholder:"Create Password"},_("password"))),(null===(d=C.errors)||void 0===d?void 0:d.password)&&Object(x.jsx)("p",{className:"form-error",children:null===(b=C.errors.password)||void 0===b?void 0:b.message})]}),Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsx)("input",Object(o.a)({type:"password",placeholder:"Confirm Password"},_("confirm_password"))),(null===(m=C.errors)||void 0===m?void 0:m.confirm_password)&&Object(x.jsx)("p",{className:"form-error",children:null===(O=C.errors.confirm_password)||void 0===O?void 0:O.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"text-sm pb-5",children:"Please share these credentials with the user!"}),Object(x.jsx)(n.d,{type:"submit",isLoading:w,className:"mx-auto block !w-3/5 mb-2.5 px-6",color:"primary",disabled:!C.isValid||w,children:"+ Create New User"}),Object(x.jsx)("button",{type:"button",className:"mx-auto block text-xs underline",onClick:function(){return h(!1)},children:"Cancel & Go Back"})]})]})})]})},_=t(25),P=function(e){var r=e.user,t=e.className,s=e.close,i={className:t},a=Object(u.useState)(),l=Object(c.a)(a,2),d=l[0],b=l[1],m=Object(j.b)();return Object(x.jsxs)(g.a,Object(o.a)(Object(o.a)({},i),{},{children:[Object(x.jsx)(g.a.Header,{children:Object(x.jsx)("h3",{className:"text-lg text-red",children:"Revoke user"})}),Object(x.jsx)(g.a.Body,{children:Object(x.jsxs)("p",{className:"text-sm text-center",children:["Doing this will revoke access privileges from ",null===r||void 0===r?void 0:r.email,". Are you sure you want to continue?"]})}),Object(x.jsx)(g.a.Footer,{children:Object(x.jsxs)("div",{className:"mt-8",children:[Object(x.jsx)(n.d,{type:"submit",onClick:function(){b(!0),m(function(e){return{type:"REVOKE_CM",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}({id:null===r||void 0===r?void 0:r.id},(function(e){b(!1),e.success&&s(r)}),(function(){b(!1)})))},isLoading:d,className:"mx-auto block !w-3/5 mb-2.5 px-6",color:"danger",disabled:d,children:"Revoke user"}),Object(x.jsx)("button",{type:"button",className:"mx-auto block text-xs underline",onClick:function(){return s(!1)},children:"Cancel & Go Back"})]})})]}))},k=function(e){var r=e.user,t=e.className,s=e.close,i={className:t},a=Object(u.useState)(),l=Object(c.a)(a,2),d=l[0],b=l[1],m=Object(j.b)();return Object(x.jsxs)(g.a,Object(o.a)(Object(o.a)({},i),{},{children:[Object(x.jsx)(g.a.Header,{children:Object(x.jsx)("h3",{className:"text-lg text-purple",children:"Revoke user"})}),Object(x.jsx)(g.a.Body,{children:Object(x.jsxs)("p",{className:"text-sm text-center",children:["Doing this will reinstate privileges for ",null===r||void 0===r?void 0:r.email,". Are you sure you want to continue?"]})}),Object(x.jsx)(g.a.Footer,{children:Object(x.jsxs)("div",{className:"mt-8",children:[Object(x.jsx)(n.d,{type:"submit",onClick:function(){b(!0),m(function(e){return{type:"ACTIVATE_CM",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}({id:null===r||void 0===r?void 0:r.id},(function(e){b(!1),e.success&&s(r)}),(function(){b(!1)})))},isLoading:d,className:"mx-auto block !w-3/5 mb-2.5 px-6",color:"success",disabled:d,children:"Activate user"}),Object(x.jsx)("button",{type:"button",className:"mx-auto block text-xs underline",onClick:function(){return s(!1)},children:"Cancel & Go Back"})]})})]}))},S=l.a().shape({password:l.c().required("Password is required").matches(d.b,"Password is invalid"),confirm_password:l.c().required("Confirm Password is required").oneOf([l.b("password"),null],"Password not match")}),A=function(e){var r,t,s,l,d=e.user,b=e.close,m=Object(j.b)(),O=Object(u.useState)(),h=Object(c.a)(O,2),f=h[0],p=h[1],v=Object(i.e)({mode:"onChange",resolver:Object(a.a)(S)}),w=v.formState,g=v.register,y=v.handleSubmit;return Object(x.jsxs)(n.i,{children:[Object(x.jsx)(n.i.Header,{children:"Set a new password"}),Object(x.jsx)(n.i.Body,{children:Object(x.jsxs)("form",{className:"text-center",onSubmit:y((function(e){p(!0),m(function(e){return{type:"RESET_PASSWORD",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}(Object(o.a)(Object(o.a)({},e),{},{id:d.id}),(function(){p(!1),b(!0)}),(function(){p(!1)})))})),children:[Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsx)("input",Object(o.a)({type:"password",placeholder:"New Password"},g("password"))),(null===(r=w.errors)||void 0===r?void 0:r.password)&&Object(x.jsx)("p",{className:"form-error",children:null===(t=w.errors.password)||void 0===t?void 0:t.message})]}),Object(x.jsxs)("div",{className:"form-control",children:[Object(x.jsx)("input",Object(o.a)({type:"password",placeholder:"Confirm New Password"},g("confirm_password"))),(null===(s=w.errors)||void 0===s?void 0:s.confirm_password)&&Object(x.jsx)("p",{className:"form-error",children:null===(l=w.errors.confirm_password)||void 0===l?void 0:l.message})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"text-sm pb-5",children:"Please share these credentials with the user!"}),Object(x.jsx)(n.d,{type:"submit",isLoading:f,className:"mx-auto block !w-3/5 mb-2.5 px-6",color:"primary",disabled:!w.isValid||f,children:"Reset Password"}),Object(x.jsx)("button",{type:"button",className:"mx-auto block text-xs underline",onClick:function(){return b(!1)},children:"Cancel & Go Back"})]})]})})]})},E=t(300),B=(t(478),t(28)),R=t.n(B),q=t(301),D=function(e){var r=e.outParams,t=e.readOnly,s=Object(n.r)(),c=s.data,i=s.register,a=s.setData,l=s.hasMore,d=s.appendData,b=s.setHasMore,m=s.page,O=s.setParams,h=s.params,f=s.resetData,p=s.setPage,v=Object(j.b)(),w=Object(n.p)().openDialog,g=Object(j.c)((function(e){var r;return null===(r=e.authReducer)||void 0===r?void 0:r.user})),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;v(y(Object(o.a)(Object(o.a)({},r),{},{page_id:e,limit:q.b}),g,(function(e,r){b(r),d(e),p((function(e){return e+1}))})))};Object(u.useEffect)((function(){r&&(O(r),f(),N(1,r))}),[r]);return Object(u.useEffect)((function(){N()}),[]),Object(x.jsxs)(n.o,Object(o.a)(Object(o.a)({},i),{},{className:R()(t?"read-only":"","users-table h-full"),onLoadMore:N,hasMore:l,dataLength:c.length,children:[Object(x.jsxs)(n.o.Header,{children:[Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Email"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Date Added"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Type"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Last Login"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"IP Address"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Compliance"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Paid"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Address"})}),Object(x.jsx)(n.o.HeaderCell,{children:Object(x.jsx)("p",{children:"Action"})})]}),Object(x.jsx)(n.o.Body,{className:"padding-tracker",children:c.map((function(e,r){return Object(x.jsxs)(n.o.BodyRow,{children:[Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsx)("p",{className:"break-words",children:e.email})}),Object(x.jsx)(n.o.BodyCell,{children:Object(E.b)(e.created_at)}),Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsx)("p",{className:"capitalize",children:Object(E.a)(e)})}),Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsx)("p",{children:Object(E.b)(e.last_login_at)})}),Object(x.jsx)(n.o.BodyCell,{children:e.last_login_ip_address}),Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsx)(n.m,{value:!!e.compliance,onChange:function(r){return function(e,r){v(function(e){return{type:"UPDATE_COMPLIANCE_USER",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}({id:r,compliance:e?1:0},(function(e){console.log(e)}),(function(){})))}(r,e.id)}})}),Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsx)(n.m,{value:!!e.paid,onChange:function(r){return function(e,r){v(function(e){return{type:"UPDATE_PAID_USER",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}({id:r,paid:e?1:0},(function(e){console.log(e)}),(function(){})))}(r,e.id)}})}),Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsx)(n.m,{value:!!e.address,onChange:function(r){return function(e,r){v(function(e){return{type:"UPDATE_ADDRESS_USER",payload:e,resolve:arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},reject:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}({id:r,address:e?1:0},(function(e){console.log(e)}),(function(){})))}(r,e.id)}})}),Object(x.jsx)(n.o.BodyCell,{children:Object(x.jsxs)("div",{className:"flex gap-1",children:[!e.banned&&Object(x.jsx)(n.d,{color:"danger",size:"xs",onClick:function(){return function(e){t||w(Object(x.jsx)(P,{user:e,afterClosed:function(e){e&&(c.find((function(r){return r.id===e.id})).banned=1,a(Object(_.a)(c)))}}))}(e)},children:"Revoke"}),!!e.banned&&Object(x.jsx)(n.d,{color:"success",size:"xs",onClick:function(){return function(e){t||w(Object(x.jsx)(k,{user:e,afterClosed:function(e){e&&(c.find((function(r){return r.id===e.id})).banned=0,a(Object(_.a)(c)))}}))}(e)},children:"Activate"}),Object(x.jsx)(n.d,{color:"primary",size:"xs",onClick:function(){return function(e){w(Object(x.jsx)(A,{user:e}))}(e)},children:"Reset Password"})]})})]},r)}))})]}))},H=t(302);r.default=function(){var e=Object(g.c)().openDialog,r=Object(n.q)().openSnack,t=Object(u.useState)(),s=Object(c.a)(t,2),o=s[0],i=s[1],a=Object(u.useState)(),l=Object(c.a)(a,2),d=l[0],b=l[1],m=Object(j.c)((function(e){var r;return null===(r=e.authReducer)||void 0===r?void 0:r.user})),O=Object(H.a)(),h=O.inputValue,f=O.handleSearch,p=function(e){e&&r("primary","Your password has successfully been updated!")},v=function(e){e&&(i(!0),setTimeout((function(){i(!1)}),100))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"flex flex-col h-full",children:[!!m.is_super_admin&&Object(x.jsx)("div",{className:"flex justify-end pb-5",children:Object(x.jsx)(n.d,{className:"px-6",color:"primary",onClick:function(){e(Object(x.jsx)(C,{afterClosed:function(e){return v(e)}}))},children:"+ New Compliance Assistant"})}),Object(x.jsxs)(n.e,{className:"mb-4",children:[Object(x.jsx)(n.g,{children:Object(x.jsx)("div",{className:"w-full flex justify-between",children:Object(x.jsx)("h2",{children:"Settings"})})}),Object(x.jsx)(n.f,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h6",{className:"pb-4",children:"Update Password"}),Object(x.jsx)(n.d,{size:"sm",className:"!w-1",color:"primary",onClick:function(){e(Object(x.jsx)(w,{afterClosed:function(e){return p(e)}}))},children:"Start"})]})})]}),!!m.is_super_admin&&Object(x.jsxs)(n.e,{className:"flex-1 min-h-0",children:[Object(x.jsx)(n.g,{children:Object(x.jsxs)("div",{className:"w-full flex justify-between",children:[Object(x.jsx)("h2",{children:"User Management"}),Object(x.jsx)("input",{className:"text-xs",type:"text",placeholder:"Search...",value:h,onChange:f((function(e){b({search:e})}))})]})}),Object(x.jsx)(n.f,{children:!o&&Object(x.jsx)(D,{outParams:d,readOnly:!m.is_super_admin})})]})]})})}}}]);
//# sourceMappingURL=14.83b258e8.chunk.js.map