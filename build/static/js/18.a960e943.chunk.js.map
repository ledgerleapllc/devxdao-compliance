{"version":3,"sources":["assets/icons/logo.svg","pages/UpdateAddress/Update/index.js","stores/api/user/actions.js"],"names":["_text","_path","_path2","_path3","_path4","_path5","_path6","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","title","titleId","props","id","xmlns","width","height","viewBox","ref","transform","fill","fontSize","fontFamily","x","y","d","ForwardRef","schema","yup","shape","cspr_address","required","confirm_address","oneOf","AddressUpdate","appendDialog","useDialog","useForm","mode","resolver","yupResolver","formState","register","handleSubmit","dispatch","useDispatch","history","useHistory","endUser","useSelector","state","authReducer","useState","currentAddress","setCurrentAddress","loading","setLoading","useEffect","type","resolve","reject","getUserAddress","address","logout","removeUpdateAddressToken","clearEndUser","push","className","onSubmit","data","payload","updateAddress","user_id","NotificationDialog","text","replace","placeholder","errors","message","isLoading","disabled","isValid","color","onClick","src","alt"],"mappings":"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","file":"static/js/18.a960e943.chunk.js","sourcesContent":["var _text, _path, _path2, _path3, _path4, _path5, _path6;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Component_43_3\",\n    \"data-name\": \"Component 43 \\\\u2013 3\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 117.385,\n    height: 37.231,\n    viewBox: \"0 0 117.385 37.231\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _text || (_text = /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Compliance\",\n    transform: \"translate(0 33.231)\",\n    fill: \"#646464\",\n    fontSize: 16,\n    fontFamily: \"SignPainter-HouseScript, SignPainter\"\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: 0,\n    y: 0\n  }, \"Compliance\"))), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_60\",\n    \"data-name\": \"Path 60\",\n    d: \"M1439.466,417.658h9.325c6.653,0,10.006,4.06,10.006,8.905,0,5.684-4.165,9.508-10.058,9.508h-9.273Zm5.973,14.275h2.593c2.959,0,4.453-1.781,4.453-5.239,0-2.829-1.179-4.9-4.453-4.924h-2.593Z\",\n    transform: \"translate(-1439.466 -417.387)\",\n    fill: \"#5bdd88\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_61\",\n    \"data-name\": \"Path 61\",\n    d: \"M1627.807,428.737h-9.849v3.091h10.373l-.053,4.243h-16.213V417.658h16.266V421.9h-10.373v2.567h9.849Z\",\n    transform: \"translate(-1590.451 -417.387)\",\n    fill: \"#5bdd88\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_62\",\n    \"data-name\": \"Path 62\",\n    d: \"M1756.841,436.071l-7.177-18.413h6.523l2.7,8.251a59.094,59.094,0,0,1,1.7,5.946h.052a62.159,62.159,0,0,1,1.886-6.208l2.515-7.989h6.417l-7.308,18.413Z\",\n    transform: \"translate(-1711.015 -417.387)\",\n    fill: \"#5bdd88\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_63\",\n    \"data-name\": \"Path 63\",\n    d: \"M2083.971,415.462h-1.807l-8.3,18.7h1.662c1.7-3.823,6.808-15.223,7.453-17.312H2083c1.161,3,6.25,13.725,7.862,17.312h1.725Z\",\n    transform: \"translate(-1995.608 -415.462)\",\n    fill: \"#5bdd88\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_64\",\n    \"data-name\": \"Path 64\",\n    d: \"M2244.563,422.149c0,5.343-3.615,9.8-9.613,9.8-5.84,0-9.691-4.322-9.691-9.822a9.652,9.652,0,1,1,19.3.026Zm-17.575-.1c0,4.269,2.8,8.382,7.962,8.382,5,0,7.884-3.615,7.884-8.225,0-4.164-2.881-8.224-8.04-8.224C2230.053,413.977,2226.988,417.67,2226.988,422.044Z\",\n    transform: \"translate(-2127.178 -412.352)\",\n    fill: \"#5bdd88\"\n  })), _path6 || (_path6 = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_66\",\n    \"data-name\": \"Path 66\",\n    d: \"M1930.753,416.647h7.628c6.008,0,9.87,3.892,9.87,8.96,0,5.955-4.567,9.586-9.922,9.586h-7.575Zm1.584,17.015h5.434c6.044,0,8.97-2.991,8.97-8.017,0-5.056-3.409-7.481-8.714-7.512h-5.69Z\",\n    transform: \"translate(-1869.368 -416.503)\",\n    fill: \"#5bdd88\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.b5a92160.svg\";\nexport { ForwardRef as ReactComponent };","import { useState, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Button } from '@shared/partials';\nimport { ReactComponent as Logo } from '@assets/icons/logo.svg';\nimport { updateAddress, getUserAddress } from '@stores/api/user/actions';\nimport { removeUpdateAddressToken } from '@shared/core/services/auth';\nimport { clearEndUser } from '@stores/auth/actions';\nimport { useDialog } from '@shared/partials';\nimport { NotificationDialog } from '@shared/partials/dialog/template/NotificationDialog';\n\nconst schema = yup.object().shape({\n  cspr_address: yup\n    .string()\n    .required('Address is required'),\n  confirm_address: yup\n    .string()\n    .required('Confirm Address is required')\n    .oneOf([yup.ref('cspr_address'), null], 'Address must match')\n});\n\nconst AddressUpdate = () => {\n  const { appendDialog } = useDialog();\n  const {\n    formState,\n    register,\n    handleSubmit,\n  } = useForm({\n    mode: 'onChange',\n    resolver: yupResolver(schema),\n  });\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const endUser = useSelector(state => state.authReducer?.endUser);\n  const [currentAddress, setCurrentAddress] = useState();\n\n  const [loading, setLoading] = useState();\n\n  const fetchData = () => {\n    dispatch(\n      getUserAddress(\n        (address) => {\n          setCurrentAddress(address?.cspr_address);\n          setLoading(false);\n        },\n        () => {\n          setLoading(false);\n        }\n      )\n    );\n  }\n\n  useEffect(() => {\n    if (endUser) {\n      fetchData();\n    } else {\n      logout();\n    }\n  }, []);\n\n  const logout = () => {\n    removeUpdateAddressToken();\n    dispatch(clearEndUser());\n    history.push('/updateaddress');\n  }\n\n  const onSubmit = data => {\n    setLoading(true);\n    dispatch(\n      updateAddress(\n        {\n          user_id: endUser.id,\n          cspr_address: data.cspr_address\n        }, \n        () => {\n          setLoading(false);\n          appendDialog(<NotificationDialog text=\"Update address success\" />);\n          history.replace('/updateaddress');\n          removeUpdateAddressToken();\n        },\n        () => {\n          setLoading(false);\n        }\n      )\n    );\n  };\n\n  return (\n    <div id=\"update-address-page\" className=\"relative h-screen\">\n      <div className=\"relative z-40 flex flex-col container mx-auto pt-8 pb-16 h-full\">\n        <header data-aos=\"fade-up\" data-aos-duration=\"800\">\n          <Logo className=\"main-logo text-primary\" />\n        </header>\n        <div className=\"flex-1 min-h-0 flex-center\">\n          <div data-aos=\"fade-up\" data-aos-duration=\"800\" className=\"w-500px\">\n            <form className=\"w-full items-center flex flex-col\" onSubmit={handleSubmit(onSubmit)}>\n              <h4 className=\"text-xl font-medium text-center capitalize text-primary pb-12.5\">We found you in the the system</h4>\n              {currentAddress && (<div className=\"mb-10 text-center\">\n                <p className=\"font-medium\">Your current CSPR address is</p>\n                <p className=\"text-center italic\">{currentAddress}</p>\n              </div>)}\n              <p className=\"mb-3 font-medium\">Enter a new address below</p>\n              <div className=\"form-control w-full mb-3\">\n                <input placeholder=\"Enter new address\" {...register('cspr_address')} />\n                {formState.errors?.address && (\n                  <p className=\"form-error\">\n                    {formState.errors.address?.message}\n                  </p>\n                )}\n              </div>\n              <div className=\"form-control w-full mb-3\">\n                <input placeholder=\"Confirm new address\" {...register('confirm_address')} />\n                {formState.errors?.confirm_address && (\n                  <p className=\"form-error\">\n                    {formState.errors.confirm_address?.message}\n                  </p>\n                )}\n              </div>\n              <Button isLoading={loading} disabled={!formState.isValid || loading} className=\"!w-1 mb-4\" color=\"primary\" type=\"submit\">Submit</Button>\n              <button onClick={logout}>Cancel</button>\n            </form>\n          </div>\n        </div>\n      </div>\n      <img className=\"z-30 absolute bottom-0\" src=\"/images/bg-login.svg\" alt=\"\" />\n    </div>\n  )\n}\n\nexport default AddressUpdate;\n","export const updateAddress = (payload, resolve = () => {}, reject = () => {}) => ({\n  type: 'UPDATE_ADDRESS',\n  payload,\n  resolve, \n  reject,\n});\n\nexport const getUserAddress = (resolve = () => {}, reject = () => {}) => ({\n  type: 'GET_USER_ADDRESS',\n  resolve,\n  reject,\n});\n"],"sourceRoot":""}